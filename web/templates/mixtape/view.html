{% extends 'base.html' %}
{% from 'macros.html' import user_card, mixtape_card %}

{% block content %}
    <div class="mixtapeView">
        <div class="mixtapeCardView">
            {{ mixtape_card(mixtape) }}
        </div>
        <div class="mixtapeDetails">
            <div class="mixtapeDescription">{{ mixtape['body'] }}</div><br>
            <div class="about">Created {{ mixtape['created'].strftime('%m/%d/%Y') }}.</div>
            Edit stuff will go here. Created by author. Date created & completed. Add track.
        </div>
    </div>
    <div class="mixtapeTracks">
        {% for track in tracks %}
            <div class="mixtapeTrack">
                <span>Track # {{ loop.index }}</span><br>
                <iframe frameborder="1" src="https://www.youtube.com/embed/{{ track['youtube_id'] }}"></iframe> 
                <div class="about">by {{ track['username'] }} on {{ track['created'].strftime('%Y-%m-%d') }}</div>
                <p>{{ track['body'] }}</p>
                {% if g.user and not mixtape['locked'] and (mixtape['author_id'] == g.user['id'] or track['author_id'] == g.user['id']) %}
                    <form method="post">
                        <input name="deleteTrack" type="submit" value="Delete track">
                        <input name="trackId" value="{{ track['id'] }}" hidden>
                    </form>
                {% endif %}
            </div>
        {% endfor%}
    </div>
    <script src="{{url_for('static', filename='js/mixtape_view.js')}}"></script>
{% endblock %}

